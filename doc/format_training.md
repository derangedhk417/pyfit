# Training Set File Format Documentation

The training set files generated by pyfit have a header that is very similar to the header documented [here](https://github.com/derangedhk417/pyfit/blob/master/doc/format_nn.md) The only difference is that all lines start with a `#` and that there are 4 additional lines.

The code that parses the parts of this file that are not in the header is [here](https://github.com/derangedhk417/pyfit/blob/4775296e81be30b589f4f3cfcdb53239e5d1d9a4/src/training_set.py#L28) and [here](https://github.com/derangedhk417/pyfit/blob/4775296e81be30b589f4f3cfcdb53239e5d1d9a4/src/training_set.py#L270)

## Additional lines

### Line 9
This is the potential type. At the time of this writing, only `1` is valid. Typical example:
```
# 1
```

### Line 10
This is the number of structures in the training set. Typical example:
```
# 3905
```

### Line 11
This is the total number of atoms in the training set. Typical example:
```
# 120488
```

### Line 12
This is a header that denotes the contents of each column in the remainder of the file.

```
# ATOM-ID GROUP-NAME GROUP_ID STRUCTURE_ID STRUCTURE_Natom STRUCTURE_E_DFT STRUCTURE_Vol
```

### Line 13 Onward

All training data entries in the file are comprised of two lines. The first line has the following format:
```
ATOM-<atom #> <structural subgroup name> <group id> <structure id> <n_atoms in structure> <dft energy for structure> <per atom volume of structure>
```

These parameters are as follows.

 - `atom #` : Sequentially increasing integers from 0 to the number of atoms in the structure minus 1.
 - `structural subgroup name` : Self explanatory. Usually the same as the first line of the DFT structure entry.
 - `group id` : Integer that uniquely identifies the structural subgroup that the atom is a member of.
 - `structure id` : Integer that identifies the structure that the atom is a member of.
 - `n_atoms in structure` : The number of atoms in the structure.
 - `dft energy for structure` : The energy that DFT predicts the structure should have.
 - `per atom volume of structure` : This is the total volume of one unit cell of the structure, calculated by taking the parallelepiped volume of the structure (using its lattice vectors). This is divided by the number of atoms in the structure.
 
The second line of an entry is as follows:

```
Gi <structural parameter 1> [[structural parameter 2] . . .]
```

This line should be the literal string `Gi` followed by a space and then followed by all of the input features (or local structure parameters) calculated for this atom, separated by spaces.

## Final Notes

Here is a truncated example file.

```
 # 1 0.5000000 1 
 # 1 
 # 'Si' 28.0855000
 # 0 0.1000000 5.0000000 0.5000000 0.5000000
 # 5 0 1 2 4 6
 # 8 2.0 2.286 2.571 2.857 3.143 3.429 3.714 4.0
 # 1 10.78701 5.23771 4.04092 1.365 0.104528 0.979074 0.891061 0.803526
 # 4 40 27 27 1
 # 1 - Potential Type
 # 3905 - Number of Structures
 # 120488 - Number of Atoms
 # ATOM-ID GROUP-NAME GROUP_ID STRUCTURE_ID STRUCTURE_Natom STRUCTURE_E_DFT STRUCTURE_Vol
ATOM-0 Si_B1 1 0 2 -1.290497E+00 1.046732E+01
Gi  1.469688E+00 8.257165E-01 1.376300E+00 2.683807E+00 3.329049E+00 3.312997E+00 2.789987E+00 1.851953E+00 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 3.824669E-01 -2.131954E-01 -3.962608E-01 -1.612938E-01 -3.185470E-01 -6.790063E-01 -2.526464E-01 1.258758E-02 6.287962E-01 -4.460728E-01 4.111877E-02 1.395242E+00 1.583328E+00 5.701643E-01 -6.291079E-01 -5.949977E-01
ATOM-1 Si_B1 1 0 2 -1.290497E+00 1.046732E+01
Gi  1.469688E+00 8.257165E-01 1.376300E+00 2.683807E+00 3.329049E+00 3.312997E+00 2.789987E+00 1.851953E+00 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 -6.931472E-01 3.824669E-01 -2.131954E-01 -3.962608E-01 -1.612938E-01 -3.185470E-01 -6.790063E-01 -2.526464E-01 1.258758E-02 6.287962E-01 -4.460728E-01 4.111877E-02 1.395242E+00 1.583328E+00 5.701643E-01 -6.291079E-01 -5.949977E-01
```

The file contains the local structure parameters for two atoms, both in the same structure. All other entries are truncated.
